{
  "hash": "21db0fb1c17c0ff0d16e35977c3dc835",
  "result": {
    "markdown": "---\ntitle: \"On the Problem of Treatment Confounder Feedback\"\ncitation:\n  type: article-journal\n  container-title: \"PsyArXiv\"\n  url: https://psyarxiv.com/tjnvh/\n  doi: \"10.31234/osf.io/tjnvh\"\ndate: 2022-11-06\ndate-format: short\nauthor: \n  - name: Joseph Bulbulia\n    orcid: 0000-0002-5861-2056\n    affiliation: Victoria University of Wellington, New Zealand\n    email: joseph.bulbulia@vuw.ac.nz\n    corresponding: yes\nexecute:\n  warning: false\ndraft: false\nimage: \"tv.png\"\nformat:\n  html:\n    code-fold: true\n    code-summary: \"reveal code\"\ncategories: \n  - Causal Inference\n  - Methods\nbibliography: references.bib\ncitation-location: margin\n---\n\n::: {.cell}\n\n:::\n\n\n\n\n## Purpose\n\nCausation occurs in time. Therefore, investigating the relationship between cause and effect requires time series data. \n\nCausality is also dynamic. Where there is Treatment-Confounder Feedback, the relationship between cause and effect cannot be identified using standard regression methods, including multi-level regression and structural equation models. Instead, special methods - \"G-methods\" - are needed. \n\nHere, I use three causal graphs to describe a problem of treatment-confounder feedback, and direct readers to G-methods for its solution.\n\n## My assumptions about you\n\n1. You are interested in psychological science.\n2. You understand how to read causal graphs ^[I will soon write a tutorial here for those who are unfamiliar]\n3. Your \"go-to\" method for time-series analysis is either a latent growth curve or a multi-level model. \n\n## Confounding by Common Cause\n\nSuppose we wish to compute the causal effect of treatment $A$ on outcome $Y$. Because $L$ is a common cause of both $A$ and $Y$, $L$ will lead to an association between $A$ and $Y$. We face *confounding by common cause*. The good news: where $L$ is measured, a regression model that conditions on $L$ will break the association between $A$ and $Y$. Again, causation occurs in time. We index measured nodes to ensure our data adhere to time's arrow\n\n\n::: {.cell layout-align=\"center\" engine.opts='{\"template\":\"tikz-template.tex\",\"dvisvgm.opts\":\"--font-format=woff\"}' hash='conf-out-feedback_cache/html/unnamed-chunk-2_205432901e14bc031c60ed6db5a76ed9'}\n\n```{.tikz .cell-code}\n\\begin{tikzpicture}[squarednode/.style={rectangle, draw=gray!90, fill=gray!5, auto}]\n\\tikzset{>=latex}\n\\tikzstyle{Arrow} = [->, thin, preaction = {decorate}]\n\\tikzstyle{DoubleArrow} = [-, preaction = {decorate}]\n\\node[squarednode] (1) {$L_{t-1}$};\n\\node[right =of 1] (2) {$A_{t}$};\n\\node[right =of 2] (3) {$Y_{t+1}$};\n\\draw[Arrow,bend left] (1) to (3);\n\\draw[Arrow] (1) to (2);\n```\n\n\n::: {.cell-output-display}\n![](conf-out-feedback_files/figure-html/unnamed-chunk-2-1.svg){fig-align='center' width=672}\n:::\n:::\n\n\n## Confounding by Over-Conditioning\n\nSuppose $L_{t+1}$ is an effect of $A_{t}$. To condition on the common effect will induce a spurious association between $A_t$ and $Y_{t+1}$ through the unmeasured confounder $U$ (red path). We may avoid this problem by excluding $L_{t+1}$ from our regression model. To know whether exclusion is warranted requires indexing the relative occurrences of $A$ and $L$. However, without time-series data, we cannot generally know whether $L$ is a cause of $A$ or its effect. Figures 1 and 2 illustrate the importance of collecting time-series data to infer causality. Although psychological scientists are familiar with adjustment by regression to address confounding by common cause, we are less familiar with the hazards of over-conditioning. Generally, **confounding control in any observational science requires time series data**.\n\n\n::: {.cell layout-align=\"center\" engine.opts='{\"template\":\"tikz-template.tex\",\"dvisvgm.opts\":\"--font-format=woff\"}' hash='conf-out-feedback_cache/html/unnamed-chunk-3_95abd17d213c693183ab41952af7f5e4'}\n\n```{.tikz .cell-code}\n\\begin{tikzpicture}[squarednode/.style={rectangle, draw=red!60, fill=red!5}, scale = 4]\n\\tikzset{>=latex}\n\\tikzstyle{Arrow} = [->, thin, preaction = {decorate}]\n\\tikzstyle{DoubleArrow} = [-, dotted, preaction = {decorate}]\n\\node[] (0) {$U$};\n\\node[ below =of 0] (1) {$A_t$};\n\\node[squarednode, right =of 1] (2) {$L_{t+1}$};\n\\node[right =of 2] (3) {$Y_{t+1}$};\n\\draw[Arrow,bend left=25, red] (0) to (3);\n\\draw[Arrow] (0) to (2);\n\\draw[Arrow] (1) to (2);\n\\draw[DoubleArrow, bend right=20, red] (0) to (1);\n```\n\n\n::: {.cell-output-display}\n![](conf-out-feedback_files/figure-html/unnamed-chunk-3-1.svg){fig-align='center' width=672}\n:::\n:::\n\n\n## Confounding control for Treatment-Confounder Feedback: Damned if you condition damned if you do not.\n\nSuppose we collect time series data. Suppose further that conditioning on $L$ blocks an unmeasured common cause $U$ of future treatments $A$ and future outcomes $Y$. Suppose further, as in Figure 2, past states of $A$ affect future states of $L$. Notice, regression faces a *damned-if-we-do-damned-if-we-don't* adjustment challenge. On the one hand, to avoid confounding by a common cause we must adjust for $L$ at all time points. On the other hand, adjusting for $L_{t+1}$ induces confounding by over-conditioning (paths in red). \\*\\*Regression, including multi-level regression and structural equation models, must be abandoned.\\* There are alternatives to regression called G-methods that may address treatment-confounder feedback. One of these methods, the Marginal Structural Model, replaces $L$ with inverse probability weights for the exposure. G-methods are described in Chapters 12 and 13 of Hernan and Robin's[@hernan2023][^1]\n\n[^1]: We draw the minimum number of paths to clarify the problem.\n\n\n::: {.cell layout-align=\"center\" engine.opts='{\"template\":\"tikz-template.tex\",\"dvisvgm.opts\":\"--font-format=woff\"}' hash='conf-out-feedback_cache/html/unnamed-chunk-4_9c33a8f915e43ecf725eabf34b8801c9'}\n\n```{.tikz .cell-code}\n\\begin{tikzpicture}[squarednode/.style={rectangle, draw=red!60, fill=red!5}, scale = 4]\n\\tikzset{>=latex}\n\\tikzstyle{Arrow} = [->, thin, preaction = {decorate}]\n\\tikzstyle{DoubleArrow} = [-, thick, dotted, preaction = {decorate}]\n\n\\node[draw=black, thick] (1) {L$_{t-1}$};\n\\node[right =of 1] (2) {A$_{t}$};\n\\node[right =of 2] (3) {Y$_{t+1}$};\n\\node[squarednode, right =of 3] (4) {L$_{t+1}$};\n\\node[right =of 4] (5) {A$_{t+1}$};\n\\node[right =of 5] (6) {Y$_{t+2}$};\n\\node[left =of 1] (7) {U};\n\\draw[Arrow] (1) -- (2);\n\\draw[Arrow] (4) -- (5);\n\\draw[Arrow] (7) to (1);\n\\draw[DoubleArrow, red, bend left=40] (2) to (6);\n\\draw[Arrow, bend right, red] (7) to (6);\n\\draw[Arrow, bend right, red] (7) to (4);\n\\draw[Arrow, bend right] (7) to (3);\n\\draw[Arrow, bend left, red] (2) to (4);\n```\n\n\n::: {.cell-output-display}\n![](conf-out-feedback_files/figure-html/unnamed-chunk-4-1.svg){fig-align='center' width=672}\n:::\n:::\n\n\n## Importance\n\nI write this report to encourage psychological scientists to (1) collect time-series data and (2) address treatment-confounder feedback by employing G-methods. I do not write this report to cast stones. My published work offers ample illustrations of the problems that I describe here. On a positive note, a causal revolution in psychological science is upon us. Our best science remains ahead of us [@vanderweele2015].\n\n## References\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}